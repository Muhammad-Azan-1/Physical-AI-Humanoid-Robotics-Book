"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[1639],{894:(s,e,a)=>{a.r(e),a.d(e,{default:()=>c});var t=a(6540),r=a(351),i=a(1899),l=a(4213),n=a(2777),o=a(9944),d=a(4848);const c=()=>{const[s,e]=(0,t.useState)("request"),[a,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),[m,p]=(0,t.useState)(""),[g,w]=(0,t.useState)(!1),[x,y]=(0,t.useState)(!1),[b,j]=(0,t.useState)(""),[f,v]=(0,t.useState)(""),[V,N]=(0,t.useState)({}),{resetPassword:P}=(0,i.h)(),{siteConfig:k}=(0,n.A)(),S=`${k.baseUrl}signin`;(0,t.useEffect)(()=>{(async()=>{const s=new URLSearchParams(window.location.hash.substring(1)),a=s.get("access_token"),t=s.get("type");if(a&&"recovery"===t){e("reset");try{const e=k.customFields,t=(0,o.jB)({url:e?.supabaseUrl||"",anonKey:e?.supabaseAnonKey||""}),r=s.get("refresh_token");r&&await t.auth.setSession({access_token:a,refresh_token:r})}catch(r){console.error("Error setting session:",r)}}})()},[k]);const q=()=>{const e={};if("request"===s){const s=(0,l.DT)(a);s.isValid||(e.email=s.message||"Invalid email")}else{const s=(0,l.Oj)(u);s.isValid||(e.password=s.message||"Invalid password");const a=(0,l.nY)(u,m);a.isValid||(e.confirmPassword=a.message||"Passwords do not match")}return N(e),0===Object.keys(e).length};return(0,d.jsx)(r.A,{title:"Reset Password",description:"Reset your account password",children:(0,d.jsx)("div",{className:"auth-page",children:(0,d.jsx)("div",{className:"auth-container",children:(0,d.jsxs)("div",{className:"auth-card",children:[(0,d.jsxs)("div",{className:"auth-header",children:[(0,d.jsx)("h1",{children:"request"===s?"Forgot password?":"Create new password"}),(0,d.jsx)("p",{children:"request"===s?"Enter your email to receive a reset link":"Enter your new password below"})]}),b&&(0,d.jsx)("div",{className:"auth-alert",children:b}),f&&(0,d.jsx)("div",{className:"auth-success-alert",style:{padding:"12px 16px",borderRadius:"10px",background:"rgba(6, 182, 212, 0.1)",border:"1px solid rgba(6, 182, 212, 0.2)",color:"var(--ifm-color-primary)",fontSize:"14px",marginBottom:"20px"},children:f}),(0,d.jsxs)("form",{onSubmit:"request"===s?async s=>{if(s.preventDefault(),q()){y(!0),j(""),v("");try{await P(a),v("Password reset link sent! Check your email inbox.")}catch(e){j(e.message||"Failed to send reset email. Please try again.")}finally{y(!1)}}}:async s=>{if(s.preventDefault(),q()){y(!0),j(""),v("");try{const s=k.customFields,e=(0,o.jB)({url:s?.supabaseUrl||"",anonKey:s?.supabaseAnonKey||""}),{error:a}=await e.auth.updateUser({password:u});if(a)throw a;v("Password updated successfully! Redirecting to sign in..."),setTimeout(()=>{window.location.href=S},2e3)}catch(e){j(e.message||"Failed to update password. Please try again.")}finally{y(!1)}}},className:"auth-form",children:["request"===s?(0,d.jsxs)("div",{className:"auth-form-group",children:[(0,d.jsx)("label",{htmlFor:"email",className:"auth-label",children:"Email address"}),(0,d.jsx)("input",{type:"email",id:"email",value:a,onChange:s=>c(s.target.value),className:"auth-input "+(V.email?"error":""),placeholder:"you@example.com"}),V.email&&(0,d.jsx)("div",{className:"auth-error",children:V.email})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"auth-form-group",children:[(0,d.jsx)("label",{htmlFor:"password",className:"auth-label",children:"New password"}),(0,d.jsxs)("div",{className:"auth-input-wrapper",children:[(0,d.jsx)("input",{type:g?"text":"password",id:"password",value:u,onChange:s=>h(s.target.value),className:"auth-input "+(V.password?"error":""),placeholder:"At least 8 characters",style:{paddingRight:"44px"}}),(0,d.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>w(!g),children:g?(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,d.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,d.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]}),V.password&&(0,d.jsx)("div",{className:"auth-error",children:V.password})]}),(0,d.jsxs)("div",{className:"auth-form-group",children:[(0,d.jsx)("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirm new password"}),(0,d.jsx)("input",{type:"password",id:"confirmPassword",value:m,onChange:s=>p(s.target.value),className:"auth-input "+(V.confirmPassword?"error":""),placeholder:"Re-enter your password"}),V.confirmPassword&&(0,d.jsx)("div",{className:"auth-error",children:V.confirmPassword})]})]}),(0,d.jsx)("button",{type:"submit",className:"auth-submit-btn",disabled:x,children:x?"request"===s?"Sending...":"Updating...":"request"===s?"Send reset link":"Update password"}),x&&(0,d.jsxs)("div",{className:"auth-loading",children:[(0,d.jsx)("div",{className:"auth-spinner"}),(0,d.jsx)("span",{children:"request"===s?"Sending email...":"Updating password..."})]})]}),(0,d.jsx)("div",{className:"auth-divider",children:(0,d.jsx)("span",{children:"Remember your password?"})}),(0,d.jsx)("button",{type:"button",className:"auth-secondary-btn",onClick:()=>window.location.href=S,children:"Back to Sign in"})]})})})})}},4213:(s,e,a)=>{a.d(e,{DT:()=>t,G4:()=>n,Oj:()=>r,nY:()=>i,wv:()=>o,xV:()=>d,yS:()=>l});const t=s=>{if(!s)return{isValid:!1,message:"Email is required"};return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?{isValid:!0}:{isValid:!1,message:"Please enter a valid email address"}},r=s=>s?s.length<8?{isValid:!1,message:"Password must be at least 8 characters long"}:s.length>128?{isValid:!1,message:"Password must be less than 128 characters"}:/[A-Z]/.test(s)?/[a-z]/.test(s)?/\d/.test(s)?/[!@#$%^&*(),.?":{}|<>]/.test(s)?{isValid:!0}:{isValid:!1,message:"Password must contain at least one special character"}:{isValid:!1,message:"Password must contain at least one number"}:{isValid:!1,message:"Password must contain at least one lowercase letter"}:{isValid:!1,message:"Password must contain at least one uppercase letter"}:{isValid:!1,message:"Password is required"},i=(s,e)=>s!==e?{isValid:!1,message:"Passwords do not match"}:{isValid:!0},l=s=>{if(!s)return{isValid:!1,message:"Name is required"};if(s.length<2)return{isValid:!1,message:"Name must be at least 2 characters long"};if(s.length>50)return{isValid:!1,message:"Name must be less than 50 characters"};return/^[a-zA-Z\s\-']+$/.test(s)?{isValid:!0}:{isValid:!1,message:"Name can only contain letters, spaces, hyphens, and apostrophes"}},n=s=>{if(!s)return{isValid:!1,message:"Display name is required"};if(s.length<3)return{isValid:!1,message:"Display name must be at least 3 characters long"};if(s.length>30)return{isValid:!1,message:"Display name must be less than 30 characters"};return/^[a-zA-Z0-9\s\-_.]+$/.test(s)?{isValid:!0}:{isValid:!1,message:"Display name can only contain letters, numbers, spaces, hyphens, underscores, and periods"}},o=s=>{if(!s)return{isValid:!0};try{return new URL(s),{isValid:!0}}catch{return{isValid:!1,message:"Please enter a valid URL"}}},d=s=>s.length>500?{isValid:!1,message:"Bio must be less than 500 characters"}:{isValid:!0}}}]);